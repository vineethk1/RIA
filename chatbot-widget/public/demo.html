<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chatbot Widget - Documentation & Demo</title>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  line-height: 1.6;
  color: #1f2937;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  min-height: 100vh;
  padding: 40px 20px;
}

.hero {
  background: white;
  color: #1f2937;
  padding: 80px 40px;
  text-align: center;
  border-radius: 12px;
  margin-bottom: 40px;
  box-shadow: 0 10px 40px rgba(0,0,0,0.2);
}

.hero h1 {
  font-size: 3.5rem;
  margin-bottom: 20px;
  font-weight: 800;
  color: #2563eb;
  letter-spacing: -1px;
}

.hero p {
  font-size: 1.35rem;
  opacity: 0.8;
  max-width: 700px;
  margin: 0 auto;
  color: #4b5563;
  font-weight: 400;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
}

.section {
  background: white;
  border-radius: 12px;
  padding: 40px;
  margin-bottom: 40px;
  box-shadow: 0 10px 40px rgba(0,0,0,0.2);
}

.section h2 {
  color: #2563eb;
  font-size: 2rem;
  margin-bottom: 24px;
  padding-bottom: 12px;
  border-bottom: 3px solid #e5e7eb;
}

.section h3 {
  color: #1e40af;
  font-size: 1.5rem;
  margin-top: 32px;
  margin-bottom: 16px;
}

.section h4 {
  color: #1f2937;
  font-size: 1.2rem;
  margin-top: 24px;
  margin-bottom: 12px;
}

.section p {
  margin-bottom: 16px;
  color: #4b5563;
  font-size: 1.05rem;
}

.code-block {
  background: #1f2937;
  color: #f9fafb;
  padding-left: 24px;
  padding-top: 10px;
  padding-bottom: 10px;
  border-radius: 8px;
  overflow-x: auto;
  margin: 20px 0;
  font-family: 'Courier New', monospace;
  font-size: 14px;
  position: relative;
  line-height: 1.5;
  white-space: pre;
}

.code-block code {
  color: #10b981;
}

.code-comment {
  color: #9ca3af;
  font-style: italic;
}

.code-key {
  color: #60a5fa;
}

.code-string {
  color: #fbbf24;
}

.note {
  background: #dbeafe;
  border-left: 4px solid #2563eb;
  padding: 16px 20px;
  margin: 20px 0;
  border-radius: 4px;
}

.note strong {
  color: #1e40af;
}

.warning {
  background: #fef3c7;
  border-left: 4px solid #f59e0b;
  padding: 16px 20px;
  margin: 20px 0;
  border-radius: 4px;
}

.warning strong {
  color: #d97706;
}

.success {
  background: #d1fae5;
  border-left: 4px solid #10b981;
  padding: 16px 20px;
  margin: 20px 0;
  border-radius: 4px;
}

.success strong {
  color: #059669;
}

.info {
  background: #e0e7ff;
  border-left: 4px solid #6366f1;
  padding: 16px 20px;
  margin: 20px 0;
  border-radius: 4px;
}

.info strong {
  color: #4f46e5;
}

.features-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 24px;
  margin: 32px 0;
}

.feature-card {
  background: #f9fafb;
  border: 2px solid #e5e7eb;
  border-radius: 8px;
  padding: 24px;
  transition: all 0.3s;
}

.feature-card:hover {
  border-color: #2563eb;
  box-shadow: 0 4px 12px rgba(37, 99, 235, 0.1);
  transform: translateY(-2px);
}

.feature-card h4 {
  color: #1f2937;
  font-size: 1.2rem;
  margin-bottom: 12px;
}

.feature-card p {
  color: #6b7280;
  font-size: 0.95rem;
  margin: 0;
}

.test-button {
  background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
  color: white;
  border: none;
  padding: 12px 24px;
  font-size: 14px;
  font-weight: 600;
  border-radius: 8px;
  cursor: pointer;
  box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
  transition: transform 0.2s, box-shadow 0.2s;
  margin: 8px;
}

.test-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 16px rgba(37, 99, 235, 0.4);
}

.test-button:active {
  transform: translateY(0);
}

.clear-button {
  background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
}

.test-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 20px;
  margin: 32px 0;
}

.test-card {
  background: #f9fafb;
  border: 2px solid #e5e7eb;
  border-radius: 8px;
  padding: 20px;
  transition: border-color 0.2s, box-shadow 0.2s;
}

.test-card:hover {
  border-color: #2563eb;
  box-shadow: 0 4px 12px rgba(37, 99, 235, 0.1);
}

.test-card h4 {
  margin: 0 0 8px 0;
  color: #1f2937;
  font-size: 1.1rem;
}

.test-card p {
  margin: 0 0 16px 0;
  color: #6b7280;
  font-size: 0.95rem;
}

.console-output {
  background: #111827;
  color: #10b981;
  padding: 20px;
  border-radius: 8px;
  font-family: 'Courier New', monospace;
  font-size: 13px;
  max-height: 300px;
  overflow-y: auto;
  margin: 20px 0;
}

.console-line {
  margin: 4px 0;
}

.api-table {
  width: 100%;
  border-collapse: collapse;
  margin: 24px 0;
  font-size: 0.95rem;
}

.api-table th,
.api-table td {
  padding: 12px;
  text-align: left;
  border-bottom: 1px solid #e5e7eb;
}

.api-table th {
  background: #f3f4f6;
  font-weight: 600;
  color: #1f2937;
}

.api-table code {
  background: #f3f4f6;
  padding: 2px 6px;
  border-radius: 4px;
  font-size: 0.9rem;
  color: #dc2626;
}

.control-panel {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
  padding: 20px;
  background: #f9fafb;
  border-radius: 8px;
  margin: 20px 0;
}

ul {
  margin: 16px 0;
  padding-left: 24px;
}

li {
  margin: 8px 0;
  color: #4b5563;
}

.prop-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 16px;
  margin: 20px 0;
}

.prop-item {
  background: #f9fafb;
  padding: 16px;
  border-radius: 6px;
  border-left: 3px solid #2563eb;
}

.prop-item h5 {
  color: #1f2937;
  margin: 0 0 8px 0;
  font-size: 1rem;
}

.prop-item p {
  margin: 0;
  font-size: 0.9rem;
  color: #6b7280;
}

.prop-item code {
  background: #e5e7eb;
  padding: 2px 6px;
  border-radius: 3px;
  font-size: 0.85rem;
  color: #dc2626;
}
</style>
</head>
<body>
<div class="container">
  <div class="hero">
    <h1>Chatbot Widget</h1>
    <p>Easy-to-embed, customizable chatbot widget for your website with powerful agent configuration</p>
  </div>

  <!-- Quick Start Section -->
  <div class="section">
    <h2>Quick Start</h2>
    <p>Get started in seconds with just one line of code. Add this to your website:</p>
    
    <div class="code-block">
<span class="code-comment">&lt;!-- Add this script to your HTML --&gt;</span>
&lt;script src="https://your-cdn.com/chatbot.js"&gt;&lt;/script&gt;
    </div>

    <div class="success">
      <strong>That's it!</strong> The chatbot will automatically appear in the bottom-right corner of your page with default settings.
    </div>

    <h3>Optional: Custom Configuration</h3>
    <p>If you want to customize the chatbot, add an initialization script:</p>

    <div class="code-block">
&lt;script src="https://your-cdn.com/chatbot.js"&gt;&lt;/script&gt;
&lt;script&gt;
  <span class="code-comment">// Initialize with custom options</span>
  window.initChatbot({
    theme: 'dark',
    position: { bottom: 24, right: 24 },
    configFile: '/agent-config.json'
  });
&lt;/script&gt;
    </div>
  </div>

  <!-- Features Section -->
  <div class="section">
    <h2>Features</h2>
    
    <div class="features-grid">
      <div class="feature-card">
        <h4>Themeable</h4>
        <p>Light and dark themes with full customization support</p>
      </div>
      
      <div class="feature-card">
        <h4>Responsive</h4>
        <p>Works perfectly on desktop, tablet, and mobile devices</p>
      </div>
      
      <div class="feature-card">
        <h4>Flexible Positioning</h4>
        <p>Position anywhere on your page with custom styles</p>
      </div>
      
      <div class="feature-card">
        <h4>Easy Integration</h4>
        <p>Single script tag - no complex setup required</p>
      </div>
      
      <div class="feature-card">
        <h4>Custom Branding</h4>
        <p>Match your brand colors and style</p>
      </div>
      
      <div class="feature-card">
        <h4>Agent Configuration</h4>
        <p>Connect to custom AI endpoints and APIs</p>
      </div>

      <div class="feature-card">
        <h4>Memory Support</h4>
        <p>Maintain conversation context across messages</p>
      </div>
      
      <div class="feature-card">
        <h4>Lightweight</h4>
        <p>Optimized bundle size for fast loading</p>
      </div>
    </div>
  </div>

  <!-- Configuration Options -->
  <div class="section">
    <h2>Configuration Options</h2>
    
    <table class="api-table">
      <thead>
        <tr>
          <th>Option</th>
          <th>Type</th>
          <th>Default</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>theme</code></td>
          <td>string</td>
          <td><code>'light'</code></td>
          <td>Theme mode: 'light' or 'dark'</td>
        </tr>
        <tr>
          <td><code>position</code></td>
          <td>object</td>
          <td><code>{ bottom: 24, right: 24 }</code></td>
          <td>Position in pixels from edges</td>
        </tr>
        <tr>
          <td><code>embedded</code></td>
          <td>boolean</td>
          <td><code>false</code></td>
          <td>Embed in container instead of floating</td>
        </tr>
        <tr>
          <td><code>customStyles</code></td>
          <td>object</td>
          <td><code>{}</code></td>
          <td>Custom style overrides</td>
        </tr>
        <tr>
          <td><code>configFile</code></td>
          <td>string</td>
          <td><code>undefined</code></td>
          <td>Path to agent configuration JSON file</td>
        </tr>
      </tbody>
    </table>

    <h3>Custom Styles</h3>
    <p>The <code>customStyles</code> object accepts these properties:</p>
    
    <div class="prop-grid">
      <div class="prop-item">
        <h5><code>fab</code></h5>
        <p>Floating action button styles (position, colors, size)</p>
      </div>
      <div class="prop-item">
        <h5><code>avatar</code></h5>
        <p>Bot avatar styles (background, color)</p>
      </div>
      <div class="prop-item">
        <h5><code>userMessage</code></h5>
        <p>User message bubble styles (background, color)</p>
      </div>
      <div class="prop-item">
        <h5><code>header</code></h5>
        <p>Chat header styles (background, color, padding)</p>
      </div>
      <div class="prop-item">
        <h5><code>paper</code></h5>
        <p>Chat window styles (width, height, border radius)</p>
      </div>
      <div class="prop-item">
        <h5><code>container</code></h5>
        <p>Container styles (position, dimensions)</p>
      </div>
      <div class="prop-item">
        <h5><code>sendButton</code></h5>
        <p>Send button styles (color, background)</p>
      </div>
    </div>
  </div>

  <!-- Agent Configuration Section -->
  <div class="section">
    <h2>Agent Configuration</h2>
    <p>Connect your chatbot to custom AI endpoints and APIs using an agent configuration file. This powerful feature allows you to integrate with your own backend services, AI models, or third-party APIs.</p>

    <h3>What is an Agent Configuration?</h3>
    <p>An agent configuration file is a JSON file that defines:</p>
    <ul>
      <li><strong>Custom endpoints:</strong> Where to send user messages for processing</li>
      <li><strong>Request format:</strong> How to structure API requests</li>
      <li><strong>Response handling:</strong> How to extract and display responses</li>
      <li><strong>Memory management:</strong> How to maintain conversation context</li>
      <li><strong>Agent metadata:</strong> Description and capabilities of each agent</li>
    </ul>

    <h3>Basic Setup</h3>
    <p>To use an agent configuration, create a JSON file and reference it when initializing the chatbot:</p>

    <div class="code-block">
window.initChatbot({
  configFile: '/path/to/agent-config.json'
});
    </div>

    <h3>Configuration File Structure</h3>
    <p>Here's a complete example of an agent configuration file:</p>

    <div class="code-block">{
  <span class="code-key">"agents"</span>: {
    <span class="code-key">"coast_agent"</span>: {
      <span class="code-key">"description"</span>: <span class="code-string">"Provides information related to manufacturing"</span>,
      <span class="code-key">"endpoint"</span>: <span class="code-string">"http://localhost:8080/chat/manufacturing"</span>,
      <span class="code-key">"method"</span>: <span class="code-string">"POST"</span>,
      <span class="code-key">"query_params"</span>: [],
      <span class="code-key">"required_fields"</span>: [
        <span class="code-string">"query"</span>
      ],
      <span class="code-key">"response_format"</span>: <span class="code-string">"json"</span>,
      <span class="code-key">"response_field"</span>: [
        <span class="code-string">"response"</span>
      ],
      <span class="code-key">"memory"</span>: {
        <span class="code-key">"enabled"</span>: true,
        <span class="code-key">"delivery"</span>: <span class="code-string">"body"</span>,
        <span class="code-key">"field_name"</span>: <span class="code-string">"conversation_history"</span>,
        <span class="code-key">"send_as"</span>: <span class="code-string">"json"</span>,
        <span class="code-key">"item_template"</span>: {
          <span class="code-key">"role"</span>: <span class="code-string">"{role}"</span>,
          <span class="code-key">"content"</span>: <span class="code-string">"{text}"</span>
        }
      }
    }
  }
}</div>

    <h3>Configuration Properties Explained</h3>

    <h4>Agent Properties</h4>
    <table class="api-table">
      <thead>
        <tr>
          <th>Property</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>description</code></td>
          <td>string</td>
          <td>Human-readable description of what the agent does</td>
        </tr>
        <tr>
          <td><code>endpoint</code></td>
          <td>string</td>
          <td>Full URL of the API endpoint to send requests to</td>
        </tr>
        <tr>
          <td><code>method</code></td>
          <td>string</td>
          <td>HTTP method (GET, POST, PUT, etc.)</td>
        </tr>
        <tr>
          <td><code>query_params</code></td>
          <td>array</td>
          <td>List of query parameters to include in the URL</td>
        </tr>
        <tr>
          <td><code>required_fields</code></td>
          <td>array</td>
          <td>Fields that must be included in the request body</td>
        </tr>
        <tr>
          <td><code>response_format</code></td>
          <td>string</td>
          <td>Expected response format (json, text, xml)</td>
        </tr>
        <tr>
          <td><code>response_field</code></td>
          <td>array</td>
          <td>Path to extract the response text from JSON (e.g., ["data", "message"])</td>
        </tr>
      </tbody>
    </table>

    <h4>Memory Configuration</h4>
    <p>The memory object controls how conversation history is maintained and sent to your API:</p>

    <table class="api-table">
      <thead>
        <tr>
          <th>Property</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>enabled</code></td>
          <td>boolean</td>
          <td>Whether to track and send conversation history</td>
        </tr>
        <tr>
          <td><code>delivery</code></td>
          <td>string</td>
          <td>How to send history: "body" or "headers"</td>
        </tr>
        <tr>
          <td><code>field_name</code></td>
          <td>string</td>
          <td>Name of the field containing conversation history</td>
        </tr>
        <tr>
          <td><code>send_as</code></td>
          <td>string</td>
          <td>Format for sending history: "json" or "string"</td>
        </tr>
        <tr>
          <td><code>item_template</code></td>
          <td>object</td>
          <td>Template for each conversation message (uses {role} and {text} placeholders)</td>
        </tr>
      </tbody>
    </table>

    <div class="info">
      <strong>Pro Tip:</strong> The <code>item_template</code> uses placeholders like <code>{role}</code> and <code>{text}</code> which are automatically replaced with actual values. This allows you to format messages in whatever structure your API expects.
    </div>

    <h3>Example Request Body</h3>
    <p>With the configuration above, when a user sends a message, the chatbot will make a POST request like this:</p>

    <div class="code-block">POST http://localhost:8080/chat/manufacturing
Content-Type: application/json

{
  <span class="code-key">"query"</span>: <span class="code-string">"What is the manufacturing process?"</span>,
  <span class="code-key">"conversation_history"</span>: [
    {
      <span class="code-key">"role"</span>: <span class="code-string">"user"</span>,
      <span class="code-key">"content"</span>: <span class="code-string">"Hello"</span>
    },
    {
      <span class="code-key">"role"</span>: <span class="code-string">"assistant"</span>,
      <span class="code-key">"content"</span>: <span class="code-string">"Hi! How can I help?"</span>
    },
    {
      <span class="code-key">"role"</span>: <span class="code-string">"user"</span>,
      <span class="code-key">"content"</span>: <span class="code-string">"What is the manufacturing process?"</span>
    }
  ]
}</div>

    <h3>Multiple Agents Example</h3>
    <p>You can define multiple agents for different purposes:</p>

    <div class="code-block">{
  <span class="code-key">"agents"</span>: {
    <span class="code-key">"manufacturing_agent"</span>: {
      <span class="code-key">"description"</span>: <span class="code-string">"Answers manufacturing questions"</span>,
      <span class="code-key">"endpoint"</span>: <span class="code-string">"https://api.example.com/manufacturing"</span>,
      <span class="code-key">"method"</span>: <span class="code-string">"POST"</span>,
      <span class="code-key">"required_fields"</span>: [
        <span class="code-string">"query"</span>
      ],
      <span class="code-key">"response_format"</span>: <span class="code-string">"json"</span>,
      <span class="code-key">"response_field"</span>: [
        <span class="code-string">"response"</span>
      ]
    },
    <span class="code-key">"support_agent"</span>: {
      <span class="code-key">"description"</span>: <span class="code-string">"Provides customer support"</span>,
      <span class="code-key">"endpoint"</span>: <span class="code-string">"https://api.example.com/support"</span>,
      <span class="code-key">"method"</span>: <span class="code-string">"POST"</span>,
      <span class="code-key">"required_fields"</span>: [
        <span class="code-string">"message"</span>
      ],
      <span class="code-key">"response_format"</span>: <span class="code-string">"json"</span>,
      <span class="code-key">"response_field"</span>: [
        <span class="code-string">"answer"</span>
      ],
      <span class="code-key">"memory"</span>: {
        <span class="code-key">"enabled"</span>: true,
        <span class="code-key">"delivery"</span>: <span class="code-string">"body"</span>,
        <span class="code-key">"field_name"</span>: <span class="code-string">"history"</span>,
        <span class="code-key">"send_as"</span>: <span class="code-string">"json"</span>
      }
    }
  }
}</div>

    <div class="warning">
      <strong>Security Note:</strong> Always validate and sanitize inputs on your server. Never expose sensitive API keys in the configuration file. Use server-side authentication and authorization for production deployments.
    </div>
  </div>

  <!-- Examples Section -->
  <div class="section">
    <h2>Configuration Examples</h2>

    <h3>Example 1: Dark Theme</h3>
    <div class="code-block">
window.initChatbot({
  theme: 'dark'
});
    </div>

    <h3>Example 2: Custom Position</h3>
    <div class="code-block">
window.initChatbot({
  position: { bottom: 50, right: 50 }
});
    </div>

    <h3>Example 3: Custom Branding</h3>
    <div class="code-block">
window.initChatbot({
  theme: 'dark',
  customStyles: {
    fab: { 
      background: 'linear-gradient(135deg, #667eea, #764ba2)',
      color: 'white'
    },
    userMessage: { 
      bgcolor: '#667eea',
      color: 'white'
    },
    header: {
      background: 'linear-gradient(135deg, #667eea, #764ba2)',
      color: 'white'
    }
  }
});
    </div>

    <h3>Example 4: Embedded Mode</h3>
    <div class="code-block">
<span class="code-comment">&lt;!-- Create a container --&gt;</span>
&lt;div id="chatbot-widget-root" style="height: 600px;"&gt;&lt;/div&gt;

&lt;script&gt;
  window.initChatbot({
    embedded: true
  });
&lt;/script&gt;
    </div>

    <h3>Example 5: With Agent Configuration</h3>
    <div class="code-block">
window.initChatbot({
  theme: 'light',
  configFile: '/config/agent-config.json',
  customStyles: {
    userMessage: { 
      bgcolor: '#2563eb',
      color: 'white'
    }
  }
});
    </div>

    <h3>Example 6: Complete Production Setup</h3>
    <div class="code-block">
&lt;script src="https://cdn.example.com/chatbot.js"&gt;&lt;/script&gt;
&lt;script&gt;
  window.initChatbot({
    theme: 'light',
    position: { bottom: 24, right: 24 },
    configFile: 'https://api.example.com/chatbot-config.json',
    customStyles: {
      fab: { 
        background: '#2563eb',
        color: 'white'
      },
      header: {
        background: '#2563eb',
        color: 'white'
      },
      userMessage: { 
        bgcolor: '#2563eb',
        color: 'white'
      },
      sendButton: {
        color: '#2563eb'
      }
    }
  });
&lt;/script&gt;
    </div>
  </div>

  <!-- API Methods -->
  <div class="section">
    <h2>API Methods</h2>
    <p>Control the chatbot programmatically with these methods:</p>

    <table class="api-table">
      <thead>
        <tr>
          <th>Method</th>
          <th>Description</th>
          <th>Example</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>window.initChatbot(config)</code></td>
          <td>Initialize or reconfigure the chatbot</td>
          <td><code>window.initChatbot({ theme: 'dark' })</code></td>
        </tr>
        <tr>
          <td><code>window.openChatbot()</code></td>
          <td>Open the chat window</td>
          <td><code>window.openChatbot()</code></td>
        </tr>
        <tr>
          <td><code>window.closeChatbot()</code></td>
          <td>Close the chat window</td>
          <td><code>window.closeChatbot()</code></td>
        </tr>
        <tr>
          <td><code>window.toggleChatbot()</code></td>
          <td>Toggle the chat window open/closed</td>
          <td><code>window.toggleChatbot()</code></td>
        </tr>
        <tr>
          <td><code>window.destroyChatbot()</code></td>
          <td>Remove the chatbot from the page</td>
          <td><code>window.destroyChatbot()</code></td>
        </tr>
      </tbody>
    </table>

    <div class="note">
      <strong>Tip:</strong> These methods are available globally on the window object after the script loads.
    </div>
  </div>

  <!-- Interactive Demo Section -->
  <div class="section">
    <h2>Interactive Test Suite</h2>
    <p>Try different configurations live! Click any test below to see it in action.</p>

    <div class="warning">
      <strong>Important:</strong> Click "Clear Chatbot" before running a new test to avoid conflicts.
    </div>

    <div class="control-panel">
      <button class="test-button clear-button" onclick="clearChatbot()">Clear Chatbot</button>
      <button class="test-button" onclick="window.openChatbot?.()">Open</button>
      <button class="test-button" onclick="window.closeChatbot?.()">Close</button>
      <button class="test-button" onclick="window.toggleChatbot?.()">Toggle</button>
    </div>

    <div class="test-grid">
      <div class="test-card">
        <h4>Test 1: Default Light Theme</h4>
        <p>Floating chat widget in bottom-right corner with light theme</p>
        <button class="test-button" onclick="test1()">Run Test 1</button>
      </div>

      <div class="test-card">
        <h4>Test 2: Custom Position</h4>
        <p>Widget positioned 50px from bottom and right</p>
        <button class="test-button" onclick="test2()">Run Test 2</button>
      </div>

      <div class="test-card">
        <h4>Test 3: Dark Theme</h4>
        <p>Widget with dark theme styling</p>
        <button class="test-button" onclick="test3()">Run Test 3</button>
      </div>

      <div class="test-card">
        <h4>Test 4: Embedded in Container</h4>
        <p>Chatbot fills a custom container (80vh)</p>
        <button class="test-button" onclick="test4()">Run Test 4</button>
      </div>

      <div class="test-card">
        <h4>Test 5: Custom Branding</h4>
        <p>Widget with purple gradient branding</p>
        <button class="test-button" onclick="test5()">Run Test 5</button>
      </div>

      <div class="test-card">
        <h4>Test 6: Large Widget</h4>
        <p>Larger chat window (500x800)</p>
        <button class="test-button" onclick="test6()">Run Test 6</button>
      </div>

      <div class="test-card">
        <h4>Test 7: Left Side Position</h4>
        <p>Widget on bottom-left corner</p>
        <button class="test-button" onclick="test7()">Run Test 7</button>
      </div>

      <div class="test-card">
        <h4>Test 8: Programmatic Control</h4>
        <p>Automatically opens, closes, and toggles</p>
        <button class="test-button" onclick="test8()">Run Test 8</button>
      </div>

      <div class="test-card">
        <h4>Test 9: With Agent Config</h4>
        <p>Load with agent configuration file</p>
        <button class="test-button" onclick="test9()">Run Test 9</button>
      </div>
    </div>

    <h3>Console Output</h3>
    <div id="console" class="console-output">
      <div class="console-line">Ready to run tests...</div>
    </div>
  </div>

  <!-- Browser Support -->
  <div class="section">
    <h2>Browser Support</h2>
    <p>The chatbot widget works on all modern browsers:</p>
    <ul>
      <li>Chrome 90+</li>
      <li>Firefox 88+</li>
      <li>Safari 14+</li>
      <li>Edge 90+</li>
      <li>Mobile browsers (iOS Safari, Chrome Mobile)</li>
    </ul>
  </div>

  <!-- Troubleshooting -->
  <div class="section">
    <h2>Troubleshooting</h2>
    
    <h3>Chatbot not appearing?</h3>
    <ul>
      <li>Check that the script tag is correctly placed in your HTML</li>
      <li>Open browser console and look for JavaScript errors</li>
      <li>Verify the script URL is correct and accessible</li>
      <li>Ensure no CSS conflicts are hiding the widget</li>
    </ul>

    <h3>Agent configuration not working?</h3>
    <ul>
      <li>Verify the JSON file is valid (use a JSON validator)</li>
      <li>Check that the file path is correct and accessible</li>
      <li>Look for CORS errors in the browser console</li>
      <li>Ensure your API endpoint is responding correctly</li>
      <li>Verify the response format matches your configuration</li>
    </ul>

    <h3>Styling issues?</h3>
    <ul>
      <li>Check for CSS conflicts with your website styles</li>
      <li>Use browser DevTools to inspect the chatbot elements</li>
      <li>Try using <code>!important</code> in custom styles if needed</li>
      <li>Clear browser cache after updating styles</li>
    </ul>

    <div class="info">
      <strong>Need Help?</strong> Check the browser console for error messages. Most issues can be identified through console logs.
    </div>
  </div>
</div>

<!-- Load the bundled chatbot widget -->
<script src="/dist/chatbot.js"></script>

<script>
// Console logger
function log(message, type = 'info') {
  const console = document.getElementById('console');
  const line = document.createElement('div');
  line.className = 'console-line';
  const icon = type === 'success' ? '✓' : type === 'error' ? '✗' : '→';
  line.textContent = `${icon} ${message}`;
  console.appendChild(line);
  console.scrollTop = console.scrollHeight;
}

// Clear chatbot helper
function clearChatbot() {
  if (window.destroyChatbot) {
    window.destroyChatbot();
    log('Chatbot destroyed', 'success');
    
    // Remove custom container if it exists
    const customContainer = document.getElementById('custom-chat-container');
    if (customContainer) {
      customContainer.remove();
    }
    
    // // Wait a bit before reinitializing to ensure clean state
    // setTimeout(() => {
    //   if (window.initChatbot) {
    //     window.initChatbot();
    //     log('Chatbot reinitialized', 'success');
    //   }
    // }, 100);
  } else {
    log('destroyChatbot function not available', 'error');
  }
}

// Test 1: Default Light Theme
function test1() {
  log('Running Test 1: Default Light Theme');
  if (window.initChatbot) {
    window.initChatbot();
    log('Default light theme initialized', 'success');
  }
}

// Test 2: Custom Position
function test2() {
  log('Running Test 2: Custom Position');
  if (window.initChatbot) {
    window.initChatbot({ 
      position: { bottom: 50, right: 50 } 
    });
    log('Custom position applied (50px from edges)', 'success');
  }
}

// Test 3: Dark Theme
function test3() {
  log('Running Test 3: Dark Theme');
  if (window.initChatbot) {
    window.initChatbot({ 
      theme: 'dark' 
    });
    log('Dark theme initialized', 'success');
  }
}

// Test 4: Embedded in Container
function test4() {
  log('Running Test 4: Embedded in Container');
  
  // CRITICAL: Must destroy first to reset rootInstance to null
  if (window.destroyChatbot) {
    window.destroyChatbot();
    log('Previous chatbot destroyed', 'success');
  }
  
  // Remove any existing custom container
  const existingContainer = document.getElementById('custom-chat-container');
  if (existingContainer) {
    existingContainer.remove();
  }
  
  // Small delay to ensure DOM is clean
  setTimeout(() => {
    // Create custom container
    const customContainer = document.createElement('div');
    customContainer.id = 'custom-chat-container';
    customContainer.style.height = '80vh';
    customContainer.style.width = '90%';
    customContainer.style.maxWidth = '1200px';
    customContainer.style.margin = '20px auto';
    customContainer.style.border = '2px solid #2563eb';
    customContainer.style.borderRadius = '12px';
    customContainer.style.overflow = 'hidden';
    customContainer.style.position = 'relative';
    document.body.appendChild(customContainer);
    
    // Create new root inside custom container
    const chatRoot = document.createElement('div');
    chatRoot.id = 'chatbot-widget-root';
    chatRoot.style.height = '100%';
    chatRoot.style.width = '100%';
    customContainer.appendChild(chatRoot);
    
    // Initialize chatbot in embedded mode
    if (window.initChatbot) {
      window.initChatbot({
        embedded: true,
        theme: 'light',
        customStyles: {
          container: { height: '100%', position: 'relative' },
          paper: { height: '100%', maxHeight: 'none' }
        }
      });
      log('Chatbot embedded in custom container (80vh)', 'success');
    }
  }, 150);
}

// Test 5: Custom Branding
function test5() {
  log('Running Test 5: Custom Branding (Purple Gradient)');
  if (window.initChatbot) {
    window.initChatbot({
      theme: 'dark',
      customStyles: {
        fab: { 
          background: 'linear-gradient(135deg, #667eea, #764ba2)',
          color: 'white'
        },
        avatar: { 
          bgcolor: 'black', 
          color: 'white'
        },
        userMessage: { 
          bgcolor: '#667eea',
          color: 'white'
        },
        header: {
          background: 'linear-gradient(135deg, #667eea, #764ba2)',
          color: 'white'
        }
      }
    });
    log('Custom purple branding applied', 'success');
  }
}

// Test 6: Large Widget
function test6() {
  log('Running Test 6: Large Widget');
  if (window.initChatbot) {
    window.initChatbot({
      customStyles: {
        paper: {
          width: 500,
          height: 800
        }
      }
    });
    log('Large widget initialized (500x800)', 'success');
  }
}

// Test 7: Left Side Position
function test7() {
  log('Running Test 7: Left Side Position');
  if (window.initChatbot) {
    window.initChatbot({
      customStyles: {
        container: {
          left: 24,
          right: 'auto'
        }
      }
    });
    log('Left side position applied', 'success');
  }
}

// Test 8: Programmatic Control
function test8() {
  log('Running Test 8: Programmatic Control');
  if (window.initChatbot) {
    window.initChatbot();
    
    setTimeout(() => {
      if (window.openChatbot) {
        window.openChatbot();
        log('Chatbot opened (1s)', 'success');
      }
    }, 1000);
    
    setTimeout(() => {
      if (window.closeChatbot) {
        window.closeChatbot();
        log('Chatbot closed (3s)', 'success');
      }
    }, 3000);
    
    setTimeout(() => {
      if (window.toggleChatbot) {
        window.toggleChatbot();
        log('Chatbot toggled (5s)', 'success');
      }
    }, 5000);
    
    log('Programmatic control sequence started', 'success');
  }
}

// Test 9: With Agent Configuration and Blue Styling
function test9() {
  log('Running Test 9: With Agent Configuration and Blue Styling');
  if (window.initChatbot) {
    window.initChatbot({
      configFile: '/agent-config.json',
      theme: 'light',
      formattingStyles: {
        heading: {
          mt: 3,
          mb: 2,
          fontWeight: 700,
          color: '#2563eb',
          fontSize: '1.15rem',
          borderBottom: '2px solid #60a5fa',
          paddingBottom: '8px',
        },
        bold: {
          fontWeight: 700,
          color: '#1e40af',
        },
        italic: {
          fontStyle: 'italic',
          color: '#3b82f6',
        },
        code: {
          bgcolor: '#dbeafe',
          color: '#1e3a8a',
          padding: '4px 8px',
          borderRadius: '6px',
          fontSize: '0.95em',
          fontFamily: 'monospace',
          border: '1px solid #93c5fd',
        },
        blockquote: {
          borderLeft: '4px solid #60a5fa',
          bgcolor: '#f0f9ff', // Sky-50
          color: '#0c4a6e', // Sky-900
          pl: 3,
          py: 2,
          my: 2,
          borderRadius: '0 8px 8px 0',
          fontStyle: 'italic',
          boxShadow: '0 1px 3px rgba(96, 165, 250, 0.1)',
        },
        list: {
          my: 2,
          pl: 4,
          listItem: {
            mb: 1,
            lineHeight: 1.8,
            color: '#1e40af',
          },
        },
        table: {
          container: {
            my: 3,
            maxWidth: '100%',
            overflowX: 'auto',
            bgcolor: '#eff6ff',
            border: '2px solid #60a5fa',
            borderRadius: '8px',
            boxShadow: '0 2px 8px rgba(96, 165, 250, 0.15)',
          },
          header: {
            bgcolor: '#60a5fa',
            fontWeight: 700,
            color: '#ffffff',
            fontSize: '0.95rem',
            borderBottom: '2px solid #3b82f6',
            padding: '12px',
          },
          cell: {
            color: '#1e293b',
            borderBottom: '1px solid #bfdbfe',
            padding: '12px',
          },
          rowHover: {
            bgcolor: '#dbeafe',
            transition: 'background-color 0.2s ease',
          },
        },
      }
    });
    log('Chatbot initialized with fully customized blue styling', 'success');
    log('All formatting is now customizable: heading, bold, italic, code, blockquote, list, table', 'info');
  }
}

// Initialize on page load
window.addEventListener('load', () => {
  log('Chatbot documentation loaded', 'success');
  log('Try any test above to see the chatbot in action!', 'info');
});
</script>
</body>
</html>